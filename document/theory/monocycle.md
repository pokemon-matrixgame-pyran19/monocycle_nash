# 等パワーにするための座標変換
## 平行移動
パワーと相性を使って利得行列を書くモデルの時、任意のベクトルaを使った次の変換は利得行列を変えない。
Aij=pi-pj +vi×vj

p -> p'= p+v×a
v -> v'= v -a

## ３つを等パワーにする
任意の3つの戦略i,j,kについて次のように定めることでi,j,kを等パワーにすることが可能

a = (pi(vj-vk) + pj(vk - vi) +pk(vi-vj)) / T
ただし Tは(pi,vi),(pj,vj)(pk,vk)を並べた3×3行列式

## 最大パワーの探索
等パワーの３点が他の戦略よりパワーが高くなる時ナッシュ均衡となる。総当たりで全ての3点の組み合わせに対して確認することでナッシュ均衡の探索が可能。

実際の探索時には(p,v)の三次元空間でpの正方向の凸包の面を作る3点の組み合わせに探索範囲を制限し、平行移動前の点vi,vj,vkの内側にaがある(あるいは同じ意味だが平行移動後のvi,vj,vkが原点を囲む)か否かでナッシュ均衡を判定してよい。aが内側になる3点の組み合わせを探す.

ナッシュ均衡となる(等パワーの３点が最大パワー)となるのは一つまでの予想のためナッシュ均衡求めるプログラムでは一つ(or見つからなかったという結果)だけ返す想定でつくってよい
未証明なので2つ以上の組み合わせで発生したら例外を吐くようにはする

### 最大パワーの組み合わせの時のナッシュ均衡
i,j,kの組み合わせに対して、ijk以外の戦略が０、ijkが次の比率になるような戦略を考えるとその戦略はナッシュ均衡. 
i:j:k=Ajk:Aki:Aij

つまり上記比率の混合戦略と利得行列との積が全成分0または負になる。

## テスト
テストでは上記の性質を確認する必要がある。すなわち

- 計算したaによる平行移動ではi,j,kのパワーが等しくなる
- 平行移動したパワー・相性により生成した利得行列と元の利得行列が同じ
- vivjvkの内側にa(平行移動後ならaの代わりに原点)を含む組み合わせは高々一つまで
- 等パワーの３点が最大パワーになる組み合わせにおいて、その3点を使った混合戦略がナッシュ均衡になる
