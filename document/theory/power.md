
別リポジトリのID:20251021211760からコピペ

## はじめに
対戦前にキャラクター選択があるような種類のゲームの攻略法を考えたい！わたしがやってるポケモン対戦では事前に育成した6匹しか使うことが出来ませんし、カードゲームでは事前に用意したデッキを持ち込む、格闘ゲームでは使用するキャラクターを試合前に選択するようなケースです。

じゃんけん的な相性概念がある場合も多く、自分の選んだキャラクターが不利な相手に当たって悲しい思いをした人も多いと思います。この手のゲームはそれなりにそのキャラクターで練習しておく必要があるため頻繁に変えるのも難しいことが多いです。
どうせ練習するなら「強い」キャラクターを選びたいですよね。

✊が✌️に有利なのがわかってもじゃんけんマスターになれるわけでは無いように、個々のキャラクター同士の相性がわかったからといってそれだけで即どのキャラ使えばいいかわかるわけではありません。
キャラクター同士の有利不利が完全にわかってる状態をスタート地点にして、複雑に絡み合う関係性のネットワークの中からどれを選ぶのが「強い」のか考えてみるというのが長期的なテーマです。

### やること
- 特定条件のゲームでのナッシュ均衡の求め方
- "強い"キャラクターの探し方

### やらないこと
- 具体的にどういうキャラクターが強いよ的な話
- 個別の証明
- ナッシュ均衡やパワーの高いキャラクターが本当に"強い"と言えるのか(別記事で出すつもりです)



### 扱う用語の定義

いくつかの用語を確認しておきます。
じゃんけんで互いのプレイヤーが✊✌✋が1/3ずつ出し合っているような状態をナッシュ均衡と呼びます。いつでもナッシュ均衡が最強！というにはそこまで単純ではないですが、ひとまず今回はナッシュ均衡(=じゃんけんでいうところの✊✌✋1/3ずつ)にあたる手を求めるのを目標にします。

縦に自分の使うキャラや戦略を並べ、横方向に相手を並べた表を作り、組み合わせごとに勝率を書き込みます この表から勝率部分だけ抜き出した行列を利得行列と呼びこの記事では基本的に文字Aを使って表現します。なお、相手と自分が対等な状態が50%=1/2とかいう中途半端な数字だと何かとキモいので全体から1/2引いておきます。

例えばじゃんけんは次のような関係を次のような利得行列で表現します。
![](../image/janken_basic_percent.svg)

$$
勝率をそのまま書き込む→\pmatrix{
 \frac12&1 &0 \\
0 &\frac12 & 1\\
1 & 0  & \frac12 \\
}
$$
$$
A=\pmatrix{
0 &\frac12 &-\frac12 \\
- \frac12 &0 & \frac12\\
\frac12 & - \frac12 & 0\\
}
$$

敵味方入れ替えて公平なゲームでは、$A_{12}=-A_{21}$ のようにナナメの部分でプラスマイナスが反転した数字が入ります(交代行列)。

利得行列の行列要素が大きくなればこちらの勝率が高い＝有利であり、負の数になれば不利であることを表します。

#### 相性が1種類

実は、現代科学においてはパソコンくんにお願いするとピピピピ…ピコーン！でナッシュ均衡がどうなるのかはわかります。 個々の勝率がわかっている状態をスタート地点にするなら計算方法自体は確立しているのです。
じゃあわたし要らないじゃん！ …となればよかったですが、PCくんに数字だけ教えてもらって理解出来てないと応用効かなくて困ります

そこで、難しい問題を理解するために理論屋さんがよくやる考え方として、実際の問題より理想的で簡単な状況を考えて、そちらについてめっちゃ詳しく解きます 現実に近づけようとするといくらでも複雑な要素が付け加わりますが、理想的な状況が完全に解けていれば、それを基準にしてもっと増えるか減るかくらいは想像する事ができます。

利得行列Aはゲームの数だけ色んな種類がありますが、今回は計算や結果のイメージがやりやすく簡単で理想的な行列を仮定します。 具体的には次の形を今回扱う対象とします。

$$
A_{ij}=p_i-p_j+x_iy_j-y_ix_j
$$

上式のうち、pをパワー、2次元ベクトルv=(x,y)を相性と呼びます。本記事内の用語になります。

$A_{ij}$の相性部分は複数の表現ができます。次の表現はいずれも同じ意味です 

$$
\begin{align}
&x_iy_j-y_ix_j\\
&= v_i \times v_j & (ベクトルの外積) \\
&= ▲IOJの面積の2倍 & \\
&= r_i r_j \sin(\theta_i-\theta_j) & (vの極座標表示)
\end{align}
$$

このように書くとき、パワーと相性の意味を確認しましょう。

$p_i$が増えると相手の戦略に関わらず利得行列は一定値増えます。つまり、相手が誰だろうが確実に勝率を担保できる潜在能力と言う意味でパワーです。

一方、相性部分は相手によって勝率が大きく変わり、自分の$v_i$と相手を表す$v_j$のベクトル同士の位置関係次第で大きく変化します。特に原点から見て90°ズレた方向のvj相手の時に大きくなります。vがどの方向を向いていれば最強というのがなく、ある方向を向いたvに強ければ逆方向のvに弱いといった相対的な関係を表すという意味で相性ベクトルと呼ぶことにします。